import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,f as a,o as l}from"./app-CrY2N1De.js";const e={};function t(p,s){return l(),n("div",null,[...s[0]||(s[0]=[a(`<h1 id="splunk-all-in-one" tabindex="-1"><a class="header-anchor" href="#splunk-all-in-one"><span>Splunk All in One</span></a></h1><p>替代工具推荐 Log Parser Studio：免费图形化工具，支持SQL语法直接查询日志文件。 ELK Stack：大型日志分析场景，可搭建本地Elasticsearch+Kibana实时可视化平台。</p><h3 id="docker一键安装splunk" tabindex="-1"><a class="header-anchor" href="#docker一键安装splunk"><span>Docker一键安装Splunk</span></a></h3><ul><li><a href="https://www.cnblogs.com/kylingx/p/12942334.html" target="_blank" rel="noopener noreferrer">splunk单节点容器部署 - kylingx - 博客园</a></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker.io</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/vagrant/test.txt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10704c9eb7bb:/root/test.text</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 免费版 Free 许可证 - 个人学习或小型监控需求，每天新建的索引量为 500MB/天。​​永久有效​​（无时间限制）仅支持 ​​1个用户</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> socx_free</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SPLUNK_START_ARGS=--accept-license</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SPLUNK_LICENSE_URI=Free</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8008:8000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> splunk/splunk:latest</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 试用版（Trial License）短期测试企业版功能（如集群、身份验证、分布式搜索等）每日索引配额​​ 500 MB，首次安装后 ​​60天​​（过期自动转为免费版）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> socx_trial</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SPLUNK_START_ARGS=--accept-license</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SPLUNK_PASSWORD=Spassw0rd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8009:8000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 9997:9997</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> splunk/splunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Docker 数据路径: </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/opt/splunk/var/lib/splunk</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 管理控制台：admin - Spassw0rd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">http://47.76.253.98:8008/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据接收-默认端口：9997</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Splunk Environment Variables:</strong></p><div class="language-markdown line-numbers-mode" data-highlighter="shiki" data-ext="markdown" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-markdown"><span class="line"><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">  __</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">__        _             _      __</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / </span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">___</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| _ __ | |_   _ _ __ | | __  \\ \\</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">__ \\| &#39;_ \\| | | | | &#39;_ \\| |/ /   \\ \\</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">  ___</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) | |</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">_) | | |_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| | | | |   &lt;    / /</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">__/| .__/|</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">_|</span><span style="--shiki-light:#0184BC;--shiki-light-font-style:italic;--shiki-dark:#56B6C2;--shiki-dark-font-style:italic;">\\_</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">_|_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| |</span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">_|_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\\  /_/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       |_|</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">========================================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Environment Variables:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_USER - user under which to run Splunk (default: splunk)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_GROUP - group under which to run Splunk (default: splunk)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_HOME - home directory where Splunk gets installed (default: /opt/splunk)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_START_ARGS - arguments to pass into the Splunk start command; you must include &#39;--accept-license&#39; to start Splunk (default: none)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_PASSWORD - password to log into this Splunk instance, you must include a password (default: none)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_ROLE - the role of this Splunk instance (default: splunk_standalone)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      Acceptable values:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_standalone</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_search_head</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_indexer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_deployer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_license_master</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_cluster_master</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> splunk_heavy_forwarder</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_LICENSE_URI - URI or local file path (absolute path in the container) to a Splunk license</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_STANDALONE_URL, SPLUNK_INDEXER_URL, ... - comma-separated list of resolvable aliases to properly bring-up a distributed environment.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                                     This is optional for standalones, but required for multi-node Splunk deployments.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_BUILD_URL - URL to a Splunk build which will be installed (instead of the image&#39;s default build)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SPLUNK_APPS_URL - comma-separated list of URLs to Splunk apps which will be downloaded and installed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Examples:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> docker run -it -e SPLUNK_PASSWORD=helloworld -p 8000:8000 splunk/splunk start</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> docker run -it -e SPLUNK_START_ARGS=--accept-license -e SPLUNK_PASSWORD=helloworld -p 8000:8000 -p 8089:8089 splunk/splunk start</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> docker run -it -e SPLUNK_START_ARGS=--accept-license -e SPLUNK_LICENSE_URI=http://example.com/splunk.lic -e SPLUNK_PASSWORD=helloworld -p 8000:8000 splunk/splunk start</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> docker run -it -e SPLUNK_START_ARGS=--accept-license -e SPLUNK_INDEXER_URL=idx1,idx2 -e SPLUNK_SEARCH_HEAD_URL=sh1,sh2 -e SPLUNK_ROLE=splunk_search_head --hostname sh1 --network splunknet --network-alias sh1 -e SPLUNK_PASSWORD=helloworld -e SPLUNK_LICENSE_URI=http://example.com/splunk.lic splunk/splunk start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="windows-splunk-download" tabindex="-1"><a class="header-anchor" href="#windows-splunk-download"><span>Windows Splunk Download</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> splunk-9.3.1-0b8d769cb912-x64-release.msi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;https://download.splunk.com/products/splunk/releases/9.3.1/windows/splunk-9.3.1-0b8d769cb912-x64-release.msi&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="客户端调研专项-todo" tabindex="-1"><a class="header-anchor" href="#客户端调研专项-todo"><span>客户端调研专项 todo</span></a></h3><p><a href="https://download.splunk.com/products/universalforwarder/releases/8.2.5/windows/splunkforwarder-8.2.5-77015bc7a462-x64-release.msi" target="_blank" rel="noopener noreferrer">https://download.splunk.com/products/universalforwarder/releases/8.2.5/windows/splunkforwarder-8.2.5-77015bc7a462-x64-release.msi</a></p><ul><li><a href="https://www.invictus-ir.com/news/importing-windows-event-log-files-into-splunk" target="_blank" rel="noopener noreferrer">https://www.invictus-ir.com/news/importing-windows-event-log-files-into-splunk</a></li><li><a href="https://cybersecthreat.com/zh/2020/07/08/import-windows-event-log-to-splunk/" target="_blank" rel="noopener noreferrer">https://cybersecthreat.com/zh/2020/07/08/import-windows-event-log-to-splunk/</a></li></ul><p>以下是 Splunk Universal Forwarder 在 Windows 系统上的快速配置步骤，结合最佳实践整理而成：</p><hr><h3 id="⚙️-1-安装-splunk-universal-forwarder" tabindex="-1"><a class="header-anchor" href="#⚙️-1-安装-splunk-universal-forwarder"><span>⚙️ <strong>1. 安装 Splunk Universal Forwarder</strong></span></a></h3><ul><li><strong>下载</strong>：<br> 从 <a href="https://www.splunk.com/en_us/download/universal-forwarder.html" target="_blank" rel="noopener noreferrer">Splunk 官网</a> 下载 Windows 版 <code>.msi</code> 安装包。</li><li><strong>安装过程</strong>： <ul><li>双击安装包，接受许可协议。</li><li>安装目录默认：<code>C:\\Program Files\\SplunkUniversalForwarder</code>。</li><li><strong>账户权限</strong>：选择 <strong><code>本地系统账户</code></strong>（Local System），确保可访问系统日志和性能数据[citation:1][citation:2]。</li><li><strong>配置接收端</strong>：在安装向导中填写 Splunk 索引器的 IP 和端口（默认 <code>9997</code>）[citation:2][citation:4]。</li></ul></li></ul><hr><h3 id="🔧-2-配置转发到-splunk-索引器" tabindex="-1"><a class="header-anchor" href="#🔧-2-配置转发到-splunk-索引器"><span>🔧 <strong>2. 配置转发到 Splunk 索引器</strong></span></a></h3><h4 id="方法一-通过命令行-推荐快速配置" tabindex="-1"><a class="header-anchor" href="#方法一-通过命令行-推荐快速配置"><span><strong>方法一：通过命令行（推荐快速配置）</strong></span></a></h4><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 进入 Splunk 目录</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cd </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;C:\\Program Files\\SplunkUniversalForwarder\\bin&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 添加索引器地址（替换 &lt;索引器IP&gt;）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">splunk add forward</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">server &lt;索引器IP&gt;:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">9997</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启用 Windows 事件日志收集</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">splunk add monitor WinEventLog::</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//*</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">splunk enable eventlog</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">splunk restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="方法二-手动修改配置文件" tabindex="-1"><a class="header-anchor" href="#方法二-手动修改配置文件"><span><strong>方法二：手动修改配置文件</strong></span></a></h4><ol><li>编辑 <code>outputs.conf</code>：<br> 路径：<code>C:\\Program Files\\SplunkUniversalForwarder\\etc\\system\\local\\outputs.conf</code><br> 添加以下内容：</li></ol><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">   [tcpout]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">   defaultGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> splunk_indexers</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">   [tcpout:splunk_indexers]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">   server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> &lt;索引器IP&gt;:9997</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>重启服务：<br> 通过服务管理器重启 <code>SplunkForwarder</code> 服务，或命令行执行：</li></ol><div class="language-cmd line-numbers-mode" data-highlighter="shiki" data-ext="cmd" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cmd"><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   &quot;C:\\Program Files\\SplunkUniversalForwarder\\bin\\splunk&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="📢-3-配置日志收集" tabindex="-1"><a class="header-anchor" href="#📢-3-配置日志收集"><span>📢 <strong>3. 配置日志收集</strong></span></a></h3><ul><li><strong>基础监控</strong>（如系统事件日志）：<br> 通过命令行启用（见上述步骤）或编辑 <code>inputs.conf</code>：<div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[monitor://WinEventLog:://*]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">disabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> main   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 指定索引名称（需与 Splunk 服务端匹配）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>自定义日志路径</strong>（如应用日志）：<div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[monitor://C:\\YourApp\\Logs\\*.log]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">sourcetype</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> your_app_log</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> custom_index</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="✅-4-验证配置" tabindex="-1"><a class="header-anchor" href="#✅-4-验证配置"><span>✅ <strong>4. 验证配置</strong></span></a></h3><ol><li><strong>服务状态</strong>：<br> 运行 <code>services.msc</code>，确认 <code>SplunkForwarder</code> 服务状态为 <strong>正在运行</strong>。</li><li><strong>日志验证</strong>：<br> 在 Splunk Web 界面搜索：<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>index=&lt;指定的索引名&gt; host=&lt;Windows主机名&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>若看到事件日志或自定义日志，说明配置成功[citation:4]。</li></ol><hr><h3 id="⚠️-注意事项" tabindex="-1"><a class="header-anchor" href="#⚠️-注意事项"><span>⚠️ <strong>注意事项</strong></span></a></h3><ol><li><strong>端口开放</strong>：<br> 确保 Splunk 索引器的 <code>9997</code> 端口已启用（在索引器设置中：<strong>Settings → Forwarding and Receiving → Configure Receive</strong>）[citation:2][citation:3]。</li><li><strong>权限问题</strong>：<br> 若需监控远程共享日志，需使用域账户（非本地系统账户）安装[citation:2]。</li><li><strong>高级需求</strong>（如 DNS 日志）：<br> 需额外安装 Splunk Add-on for Microsoft DNS，并配置 <code>inputs.conf</code> 监控 <code>dns.log</code>[citation:5]。</li></ol><hr><h3 id="🔄-故障排查" tabindex="-1"><a class="header-anchor" href="#🔄-故障排查"><span>🔄 <strong>故障排查</strong></span></a></h3><ul><li><strong>检查日志</strong>：<br> 查看转发器日志：<code>C:\\Program Files\\SplunkUniversalForwarder\\var\\log\\splunk\\splunkd.log</code>。</li><li><strong>测试连通性</strong>：<br> 在 Windows 主机执行 <code>telnet &lt;索引器IP&gt; 9997</code>，确认端口可达。</li></ul><blockquote><p>💡 <strong>提示</strong>：如需批量部署，可通过 Splunk Deployment Server 集中管理配置[citation:1]。完整文档参考 <a href="https://docs.splunk.com/Documentation" target="_blank" rel="noopener noreferrer">Splunk 官方指南</a>。</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>测试</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`Markdown</span></span>
<span class="line"><span>## 服务端配置</span></span>
<span class="line"><span>## C:\\Program Files\\SplunkUniversalForwarder\\etc\\system\\local\\outputs.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[tcpout] defaultGroup = default-autolb-group</p><p>[tcpout:default-autolb-group] server = 47.76.253.98:9997</p><p>[tcpout-server://47.76.253.98:9997]</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>## 新建配置文件</span></span>
<span class="line"><span>## C:\\Program Files\\SplunkUniversalForwarder\\etc\\system\\local\\inputs.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[monitor://E:\\splunk_analysis*.evtx] disabled = 0 sourcetype = preprocess-winevt host = pc_machine index = wineventlog</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>## 启动服务(管理员权限) - 通过服务管理器重启 \`SplunkForwarder\` 服务，或命令行执行：</span></span>
<span class="line"><span>&quot;C:\\Program Files\\SplunkUniversalForwarder\\bin\\splunk&quot; restart</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 问题</span></span>
<span class="line"><span>- 自动绑定本地8089端口，具体用途不明。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ubuntu-22-04-安装splunk-enterprise服务端" tabindex="-1"><a class="header-anchor" href="#ubuntu-22-04-安装splunk-enterprise服务端"><span>Ubuntu 22.04 安装Splunk Enterprise服务端</span></a></h3><ul><li><a href="https://www.cnblogs.com/autopwn/p/18540982" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/autopwn/p/18540982</a></li></ul><div class="language-markdown line-numbers-mode" data-highlighter="shiki" data-ext="markdown" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-markdown"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># 下载安装包，这里采用安装Splunk Enterprise 8.2.5版本</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">wget -O splunk-8.2.5-77015bc7a462-linux-2.6-amd64.deb </span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://download.splunk.com/products/splunk/releases/8.2.5/linux/splunk-8.2.5-77015bc7a462-linux-2.6-amd64.deb</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#A626A4;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-light-text-decoration:inherit;--shiki-dark:#C678DD;--shiki-dark-text-decoration:underline;">https://download.splunk.com/products/splunk/releases/8.2.5/linux/splunk-8.2.5-77015bc7a462-linux-2.6-amd64.deb</span><span style="--shiki-light:#A626A4;--shiki-dark:#E06C75;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># 执行安装</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sudo dpkg -i splunk-8.2.5-77015bc7a462-linux-2.6-amd64.deb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># 正常情况下是没有报错直接安装成功，然后查找安装成功的路径，并执行splunk，</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># 根据向导配置登录splunk的用户名和密码，成功之后并启动服务。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/opt/splunk/bin/splunk start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">上述执行都没有问题的话，会在本地侦听8000端口，然后访问该主机的IP和8000端口即可正常访问Splunk服务端了。</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://127.0.0.1:8000</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#A626A4;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-light-text-decoration:inherit;--shiki-dark:#C678DD;--shiki-dark-text-decoration:underline;">https://127.0.0.1:8000</span><span style="--shiki-light:#A626A4;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">http://47.76.253.98:8000/</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## Uninstall Splunk</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">./splunk disable boot-start</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dpkg -r splunk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IISLog</p><div class="language-markdown line-numbers-mode" data-highlighter="shiki" data-ext="markdown" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-markdown"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## IIS日志默认存放位置​</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Windows Server 2003  C:\\Windows\\System32\\LogFiles\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Windows Server 2008  C:\\inetpub\\logs\\LogFiles\\</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">路径示例：C:\\inetpub\\logs\\LogFiles\\W3SVC1（默认站日志）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">日志文件名格式：u_exYYMMDD.log（如 u_ex240624.log）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">​​## 子目录命名规则​​</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> W3SVC&lt;网站ID&gt;（例如W3SVC1对应默认网站）。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">​​- W3SVC1​​：通常对应​​默认网站（Default Web Site）​​，ID 固定为 1。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">​​- W3SVC2​​：表示用户创建的​​第二个网站​​（例如新增的站点或应用），ID 按创建顺序递增（如2、3等）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">如何确认网站ID​​：打开IIS管理器 → 选中目标网站 → 双击“日志”图标 → 查看路径中的文件夹名称</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,50)])])}const k=i(e,[["render",t]]),d=JSON.parse('{"path":"/tld/prod/splunk.html","title":"Splunk All in One","lang":"zh-CN","frontmatter":{"description":"Splunk All in One 替代工具推荐 Log Parser Studio：免费图形化工具，支持SQL语法直接查询日志文件。 ELK Stack：大型日志分析场景，可搭建本地Elasticsearch+Kibana实时可视化平台。 Docker一键安装Splunk splunk单节点容器部署 - kylingx - 博客园 Splunk En...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Splunk All in One\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-12T16:33:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"SecCMD\\",\\"url\\":\\"https://www.seccmd.net\\"}]}"],["meta",{"property":"og:url","content":"https://www.seccmd.net/tld/prod/splunk.html"}],["meta",{"property":"og:site_name","content":"明剑实验室"}],["meta",{"property":"og:title","content":"Splunk All in One"}],["meta",{"property":"og:description","content":"Splunk All in One 替代工具推荐 Log Parser Studio：免费图形化工具，支持SQL语法直接查询日志文件。 ELK Stack：大型日志分析场景，可搭建本地Elasticsearch+Kibana实时可视化平台。 Docker一键安装Splunk splunk单节点容器部署 - kylingx - 博客园 Splunk En..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-12T16:33:57.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-12T16:33:57.000Z"}]]},"git":{"createdTime":1757419694000,"updatedTime":1757694837000,"contributors":[{"name":"fireadm","username":"fireadm","email":"iwanwu@hotmail.com","commits":2,"url":"https://github.com/fireadm"}]},"readingTime":{"minutes":5.48,"words":1643},"filePathRelative":"tld/prod/splunk.md","autoDesc":true}');export{k as comp,d as data};
