import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,f as e,o as i}from"./app-DOgIgeiH.js";const l={};function p(d,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="windows-官方优质资源" tabindex="-1"><a class="header-anchor" href="#windows-官方优质资源"><span>Windows 官方优质资源</span></a></h1><h2 id="todo" tabindex="-1"><a class="header-anchor" href="#todo"><span>todo</span></a></h2><ul><li>Microsoft Configuration Manager 可帮助 IT 部门管理电脑和服务器，保持软件的最新状态，设置配置和安全策略，并监控系统状态</li><li><a href="https://www.microsoft.com/zh-cn/evalcenter/evaluate-microsoft-endpoint-configuration-manager-technical-preview" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/zh-cn/evalcenter/evaluate-microsoft-endpoint-configuration-manager-technical-preview</a></li><li>System Center 2022 提供企业级数据中心管理方面的最新创新和安全性。</li><li><a href="https://www.microsoft.com/zh-cn/evalcenter/evaluate-system-center-2022" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/zh-cn/evalcenter/evaluate-system-center-2022</a></li></ul><h2 id="windows-官方评估版本" tabindex="-1"><a class="header-anchor" href="#windows-官方评估版本"><span>Windows 官方评估版本</span></a></h2><ul><li><a href="https://www.microsoft.com/evalcenter/evaluate-windows-10-enterprise" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/evalcenter/evaluate-windows-10-enterprise</a></li><li><a href="https://www.microsoft.com/evalcenter/evaluate-windows-11-enterprise" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/evalcenter/evaluate-windows-11-enterprise</a></li></ul><h2 id="windows-server-官方评估版本" tabindex="-1"><a class="header-anchor" href="#windows-server-官方评估版本"><span>Windows Server 官方评估版本</span></a></h2><ul><li><p><a href="https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-server-2022" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-server-2022</a></p></li><li><p><a href="https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-admin-center" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-admin-center</a></p></li><li><p><a href="https://www.microsoft.com/zh-cn/evalcenter/evaluate-sql-server-2022" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/zh-cn/evalcenter/evaluate-sql-server-2022</a></p></li><li><p>绕过注册，直接下载方法</p></li><li><p>evaluate-windows-server-2022 修改为 download-windows-server-2022</p></li></ul><h2 id="windows-开发环境" tabindex="-1"><a class="header-anchor" href="#windows-开发环境"><span>Windows 开发环境</span></a></h2><ul><li>打包好的多种虚拟机</li><li><a href="https://developer.microsoft.com/zh-cn/windows/downloads/virtual-machines/" target="_blank" rel="noopener noreferrer">https://developer.microsoft.com/zh-cn/windows/downloads/virtual-machines/</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>我们目前将虚拟机打包为四种不同的虚拟化软件选项：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Hyper-V（Gen2）、Parallels、VirtualBox和 VMware。 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>这些虚拟机包含 Windows 的评估版本，该版本将在发布日期过期。 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>如果评估期到期，桌面背景将变为黑色，你将看到一个永久性桌面通知，指示系统不是正版的，电脑将每小时关闭一次。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>到期日期：2024 年 10 月 23 日</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="hyper-v" tabindex="-1"><a class="header-anchor" href="#hyper-v"><span>Hyper-V</span></a></h1><h2 id="使用文档" tabindex="-1"><a class="header-anchor" href="#使用文档"><span>使用文档</span></a></h2><ul><li><a href="https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v</a></li></ul><blockquote><p>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All</p></blockquote><blockquote><p>DISM /Online /Enable-Feature /All /FeatureName:Microsoft-Hyper-V</p></blockquote><h2 id="关键问题-hyper-v-虚机中-开启-cpu-虚拟化功能-开启后-才能正常使用wsl-2-docker等" tabindex="-1"><a class="header-anchor" href="#关键问题-hyper-v-虚机中-开启-cpu-虚拟化功能-开启后-才能正常使用wsl-2-docker等"><span>关键问题：hyper-v 虚机中 开启 cpu 虚拟化功能 (开启后，才能正常使用wsl-2 docker等)</span></a></h2><ul><li><a href="https://medium.com/@kenslearningcurve/running-docker-in-hyper-v-433476043ec4" target="_blank" rel="noopener noreferrer">https://medium.com/@kenslearningcurve/running-docker-in-hyper-v-433476043ec4</a></li></ul><blockquote><p>Set-VMProcessor -VMName Windows10 -ExposeVirtualizationExtensions $true</p></blockquote><h1 id="netsh" tabindex="-1"><a class="header-anchor" href="#netsh"><span>netsh</span></a></h1><h2 id="cmd-powershell-配置代理" tabindex="-1"><a class="header-anchor" href="#cmd-powershell-配置代理"><span>cmd / powershell 配置代理</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>## 设置代理</span></span>
<span class="line"><span>netsh winhttp set proxy 127.0.0.1：7890</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 查看代理</span></span>
<span class="line"><span>netsh winhttp show proxy</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 取消代理</span></span>
<span class="line"><span>netsh winhttp reset proxy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="microsoft-build-of-openjdk" tabindex="-1"><a class="header-anchor" href="#microsoft-build-of-openjdk"><span>Microsoft Build of OpenJDK</span></a></h1><ul><li><p>专门给 Windows Java 开发者提供的便捷资源。（也包含其他语言：C++ C# 等等）</p></li><li><p><a href="https://learn.microsoft.com/en-us/java/openjdk/" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/java/openjdk/</a></p></li><li><p>JavaAPI 文档，还有一些好的学习资料等待挖掘</p></li><li><p><a href="https://learn.microsoft.com/en-us/java/api/" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/java/api/</a></p></li></ul><h2 id="download-the-microsoft-build-of-openjdk-支持各种主流操作系统-直接下载编译好的java安装包" tabindex="-1"><a class="header-anchor" href="#download-the-microsoft-build-of-openjdk-支持各种主流操作系统-直接下载编译好的java安装包"><span>Download the Microsoft Build of OpenJDK (支持各种主流操作系统，直接下载编译好的java安装包)</span></a></h2><ul><li><a href="https://learn.microsoft.com/en-us/java/openjdk/download" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/java/openjdk/download</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># Graphical installation</span></span>
<span class="line"><span>- MSI</span></span>
<span class="line"><span>  - https://aka.ms/download-jdk/microsoft-jdk-21.0.4-windows-x64.msi</span></span>
<span class="line"><span>  - https://aka.ms/download-jdk/microsoft-jdk-17.0.12-windows-x64.msi</span></span>
<span class="line"><span>  - https://aka.ms/download-jdk/microsoft-jdk-11.0.24-windows-x64.msi</span></span>
<span class="line"><span>- PKG</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Package manager</span></span>
<span class="line"><span>- Winget</span></span>
<span class="line"><span>- Homebrew</span></span>
<span class="line"><span>- apt (Ubuntu)</span></span>
<span class="line"><span>- apt (Debian)</span></span>
<span class="line"><span>- yum (CentOS)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-the-microsoft-build-of-openjdk" tabindex="-1"><a class="header-anchor" href="#install-the-microsoft-build-of-openjdk"><span>Install the Microsoft Build of OpenJDK</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># Install on Windows via MSI</span></span>
<span class="line"><span># msiexec /i &lt;package&gt;.msi ADDLOCAL=FeatureMain,FeatureEnvironment,FeatureJarFileRunWith,FeatureJavaHome INSTALLDIR=&quot;c:\\Program Files\\Microsoft\\&quot; /quiet</span></span>
<span class="line"><span># This example silently installs the Microsoft Build of OpenJDK, updates the PATH, associates .jar files with Java applications, and defines JAVA_HOME.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>msiexec /i https://aka.ms/download-jdk/microsoft-jdk-21.0.4-windows-x64.msi ADDLOCAL=FeatureMain,FeatureEnvironment,FeatureJarFileRunWith,FeatureJavaHome INSTALLDIR=&quot;c:\\Program Files\\Microsoft\\&quot; /quiet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-on-windows-with-the-windows-package-manager-winget" tabindex="-1"><a class="header-anchor" href="#install-on-windows-with-the-windows-package-manager-winget"><span>Install on Windows with the Windows Package Manager (winget)</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>winget search Microsoft.OpenJDK</span></span>
<span class="line"><span>winget install Microsoft.OpenJDK.21</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-on-macos" tabindex="-1"><a class="header-anchor" href="#install-on-macos"><span>Install on macOS</span></a></h2><ul><li>brew install --cask microsoft-openjdk</li></ul><h2 id="install-on-ubuntu" tabindex="-1"><a class="header-anchor" href="#install-on-ubuntu"><span>Install on Ubuntu</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># Valid values are only &#39;18.04&#39;, &#39;20.04&#39;, and &#39;22.04&#39;</span></span>
<span class="line"><span># For other versions of Ubuntu, please use the tar.gz package</span></span>
<span class="line"><span>ubuntu_release=\`lsb_release -rs\`</span></span>
<span class="line"><span>wget https://packages.microsoft.com/config/ubuntu/\${ubuntu_release}/packages-microsoft-prod.deb -O packages-microsoft-prod.deb</span></span>
<span class="line"><span>sudo dpkg -i packages-microsoft-prod.deb</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo apt-get install apt-transport-https</span></span>
<span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get install msopenjdk-21</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-on-centos-7-rpm" tabindex="-1"><a class="header-anchor" href="#install-on-centos-7-rpm"><span>Install on CentOS 7 (RPM)</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sudo rpm -Uvh https://packages.microsoft.com/config/centos/7/packages-microsoft-prod.rpm</span></span>
<span class="line"><span>sudo yum install msopenjdk-21</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="windows-sandbox" tabindex="-1"><a class="header-anchor" href="#windows-sandbox"><span>Windows Sandbox</span></a></h1><ul><li><p>测试不安全软件的神器，自动擦除痕迹</p></li><li><p>As you may already know, Windows Sandbox an isolated, temporary desktop environment where you can run untrusted software without the fear of lasting impact to your PC. In addition to the GUI method of enabling the feature, I would like to share two extra methods, PowerShell and DISM.</p></li></ul><h2 id="to-enable-windows-10-sandbox-with-powershell" tabindex="-1"><a class="header-anchor" href="#to-enable-windows-10-sandbox-with-powershell"><span>To Enable Windows 10 Sandbox with PowerShell</span></a></h2><blockquote><p>Enable-WindowsOptionalFeature -FeatureName &quot;Containers-DisposableClientVM&quot; -All -Online</p></blockquote><blockquote><p>Disable-WindowsOptionalFeature -FeatureName &quot;Containers-DisposableClientVM&quot; -Online</p></blockquote><h2 id="enable-windows-10-sandbox-with-dism" tabindex="-1"><a class="header-anchor" href="#enable-windows-10-sandbox-with-dism"><span>Enable Windows 10 Sandbox with DISM</span></a></h2><blockquote><p>dism.exe /online /Enable-Feature /FeatureName:&quot;Containers-DisposableClientVM&quot; -All</p></blockquote><blockquote><p>dism.exe /online /Disable-Feature /FeatureName:&quot;Containers-DisposableClientVM&quot;</p></blockquote><h1 id="windows-terminal" tabindex="-1"><a class="header-anchor" href="#windows-terminal"><span>Windows Terminal</span></a></h1><ul><li><p><a href="https://learn.microsoft.com/zh-cn/windows/terminal/install" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/terminal/install</a></p></li><li><p>Windows 终端是一个新式主机应用程序，它面向你喜爱的命令行 shell，如命令提示符、PowerShell 和 bash（通过适用于 Linux 的 Windows 子系统 (WSL)）。 它的主要功能包括多个选项卡、窗格、Unicode 和 UTF-8 字符支持、GPU 加速文本呈现引擎，你还可用它来创建你自己的主题并自定义文本、颜色、背景和快捷方式。</p></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>$ winget install Microsoft.WindowsTerminal</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- https://github.com/microsoft/terminal/releases</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="windows-程序包管理器" tabindex="-1"><a class="header-anchor" href="#windows-程序包管理器"><span>Windows 程序包管理器</span></a></h1><ul><li><p><a href="https://learn.microsoft.com/zh-cn/windows/package-manager/" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/package-manager/</a></p></li><li><p><a href="https://github.com/microsoft/winget-cli/" target="_blank" rel="noopener noreferrer">https://github.com/microsoft/winget-cli/</a></p></li></ul><h2 id="安装-winget" tabindex="-1"><a class="header-anchor" href="#安装-winget"><span>安装 WinGet</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>$progressPreference = &#39;silentlyContinue&#39;</span></span>
<span class="line"><span>Write-Information &quot;Downloading WinGet and its dependencies...&quot;</span></span>
<span class="line"><span>Invoke-WebRequest -Uri https://aka.ms/getwinget -OutFile Microsoft.DesktopAppInstaller_8wekyb3d8bbwe.msixbundle</span></span>
<span class="line"><span>Invoke-WebRequest -Uri https://aka.ms/Microsoft.VCLibs.x64.14.00.Desktop.appx -OutFile Microsoft.VCLibs.x64.14.00.Desktop.appx</span></span>
<span class="line"><span>Invoke-WebRequest -Uri https://github.com/microsoft/microsoft-ui-xaml/releases/download/v2.8.6/Microsoft.UI.Xaml.2.8.x64.appx -OutFile Microsoft.UI.Xaml.2.8.x64.appx</span></span>
<span class="line"><span>Add-AppxPackage Microsoft.VCLibs.x64.14.00.Desktop.appx</span></span>
<span class="line"><span>Add-AppxPackage Microsoft.UI.Xaml.2.8.x64.appx</span></span>
<span class="line"><span>Add-AppxPackage Microsoft.DesktopAppInstaller_8wekyb3d8bbwe.msixbundle</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>常用工具</li></ul><blockquote><p>winget install Microsoft.WindowsTerminal Microsoft.PowerToys Microsoft.VisualStudioCode</p></blockquote><h1 id="wsl-windows-subsystem-for-linux" tabindex="-1"><a class="header-anchor" href="#wsl-windows-subsystem-for-linux"><span>WSL - Windows Subsystem for Linux</span></a></h1><ul><li><a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/windows/wsl/install</a></li><li><a href="https://learn.microsoft.com/en-us/windows/wsl/install-on-server" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/windows/wsl/install-on-server</a></li><li><a href="https://learn.microsoft.com/en-us/windows/wsl/install-manual" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/windows/wsl/install-manual</a></li></ul><h2 id="安装-wsl-命令" tabindex="-1"><a class="header-anchor" href="#安装-wsl-命令"><span>安装 WSL 命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 现在，可以使用单个命令安装运行 WSL 所需的一切内容。 </span></span>
<span class="line"><span># 在管理员模式下打开 PowerShell 或 Windows 命令提示符，方法是右键单击并选择“以管理员身份运行”，输入 wsl --install 命令，然后重启计算机。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>wsl --install</span></span>
<span class="line"><span># 此命令将启用运行 WSL 并安装 Linux 的 Ubuntu 发行版所需的功能。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 命令行激活 WSL 服务，需要重启系统</span></span>
<span class="line"><span>&gt; Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="升级-wsl-2-版本" tabindex="-1"><a class="header-anchor" href="#升级-wsl-2-版本"><span>升级 WSL 2 版本</span></a></h2><p>*** 必须升级，不升级很难用 ***</p><blockquote><p>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</p></blockquote><blockquote><p>wsl --update</p></blockquote><h2 id="安装-wsl-发行版" tabindex="-1"><a class="header-anchor" href="#安装-wsl-发行版"><span>安装 WSL 发行版</span></a></h2><ul><li>在 Windows 应用商店搜索 ubuntu</li><li>wsl --install -d ubuntu-22.04 # 无法访问github下载镜像</li></ul><h2 id="wsl-命令" tabindex="-1"><a class="header-anchor" href="#wsl-命令"><span>WSL 命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查看安装的版本</span></span>
<span class="line"><span>wsl --list -v </span></span>
<span class="line"><span></span></span>
<span class="line"><span>wsl -u root -d ubuntu-20.04 -e ls</span></span>
<span class="line"><span>-u 指定用户</span></span>
<span class="line"><span>-d 执行发行系统</span></span>
<span class="line"><span>-e 执行命令</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="apt-换源" tabindex="-1"><a class="header-anchor" href="#apt-换源"><span>apt 换源</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo bash -c &quot;cat &gt; /etc/apt/sources.list&quot; &lt;&lt; EOF</span></span>
<span class="line"><span># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 预发布软件源，不建议启用</span></span>
<span class="line"><span># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span></span>
<span class="line"><span>EOF</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo apt-get update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>我在 hyper-v 虚拟机中安装 wsl ，只能安装 wsl v1，无法运行 wsl v2, 所以只能在 wsl v1 安装和运行。</span></span>
<span class="line"><span># 错误代码: Wsl/InstallDistro/WSL_E_INSTALL_PROCESS_FAILED</span></span>
<span class="line"><span># Problem installing WSL: Error code: Wsl/WSL_E_DEFAULT_DISTRO_NOT_FOUND</span></span>
<span class="line"><span># https://github.com/microsoft/WSL/issues/9338</span></span>
<span class="line"><span># WslRegisterDistribution failed with error: 0x80370102</span></span>
<span class="line"><span># Please enable the Virtual Machine Platform Windows feature and ensure virtualization is enabled in the BIOS.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>I switched to version 1, installed Ubuntu, then switched to Version 2 and it works now!</span></span>
<span class="line"><span>1- wsl --set-default-version 1</span></span>
<span class="line"><span>2- wsl.exe --install Ubuntu</span></span>
<span class="line"><span>3- wsl --set-default-version 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="wsl-help" tabindex="-1"><a class="header-anchor" href="#wsl-help"><span>wsl --help</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>版权所有 (c) Microsoft Corporation。保留所有权利。</span></span>
<span class="line"><span>有关此产品的隐私信息，请访问 https://aka.ms/privacy。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用法: wsl.exe [参数] [选项...][命令行]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>运行 Linux 二进制文件的参数:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   如果未提供命令行，wsl.exe 将启动默认 shell。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --exec, -e &lt;CommandLine&gt;</span></span>
<span class="line"><span>       在不使用默认 Linux shell 的情况下执行指定的命令。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --shell-type &lt;standard|login|none&gt;</span></span>
<span class="line"><span>       使用提供的 shell 类型执行指定的命令。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --</span></span>
<span class="line"><span>       按原样传递剩余的命令行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>选项:</span></span>
<span class="line"><span>   --cd &lt;Directory&gt;</span></span>
<span class="line"><span>       将指定目录设置为当前工作目录。</span></span>
<span class="line"><span>       如果使用 ~，则将使用 Linux 用户的主路径。如果路径以</span></span>
<span class="line"><span>       /字符开始，它将解释为绝对 Linux 路径。</span></span>
<span class="line"><span>       否则，该值必须是绝对 Windows 路径。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --distribution, -d &lt;Distro&gt;</span></span>
<span class="line"><span>       运行指定的分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --user, -u &lt;UserName&gt;</span></span>
<span class="line"><span>       以指定用户身份运行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --system</span></span>
<span class="line"><span>       为系统分发版启动 shell。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用于管理适用于 Linux 的 Windows 子系统的参数:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --help</span></span>
<span class="line"><span>       显示使用情况信息。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --debug-shell</span></span>
<span class="line"><span>       出于诊断目的打开 WSL2 调试 shell。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --install [发行版] [选项...]</span></span>
<span class="line"><span>       安装适用于 Linux 的 Windows 子系统分发版。</span></span>
<span class="line"><span>       有关有效分发版的列表，请使用 &#39;wsl.exe --list --online&#39;。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --no-launch, -n</span></span>
<span class="line"><span>               安装后不要启动分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --web-download</span></span>
<span class="line"><span>               从 Internet 而不是 Microsoft Store 下载分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --no-distribution</span></span>
<span class="line"><span>               仅安装所需的可选组件，不安装分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --enable-wsl1</span></span>
<span class="line"><span>               启用 WSL1 支持。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --manage &lt;Distro&gt; &lt;Options...&gt;</span></span>
<span class="line"><span>       更改发行版特定选项。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --set-sparse, -s &lt;true|false&gt;</span></span>
<span class="line"><span>               将发行版的 vhdx 设置为稀疏，从而允许自动回收磁盘空间。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --mount &lt;Disk&gt;</span></span>
<span class="line"><span>       在所有 WSL 2 分发版中附加和装载物理磁盘或虚拟磁盘。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --vhd</span></span>
<span class="line"><span>               指定 &lt;Disk&gt; 引用虚拟硬盘。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --bare</span></span>
<span class="line"><span>               将磁盘附加到 WSL2，但不要装载它。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --name &lt;Name&gt;</span></span>
<span class="line"><span>               使用装入点的自定义名称装载磁盘。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --type &lt;Type&gt;</span></span>
<span class="line"><span>               装载磁盘时要使用的文件系统(如果未指定)默认为 ext4。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --options &lt;Options&gt;</span></span>
<span class="line"><span>               其他装载选项。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --partition &lt;Index&gt;</span></span>
<span class="line"><span>               要装载的分区的索引(如果未指定)默认为整个磁盘。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --set-default-version &lt;Version&gt;</span></span>
<span class="line"><span>       更改新分发版的默认安装版本。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --shutdown</span></span>
<span class="line"><span>       立即终止所有正在运行的分发版和 WSL 2</span></span>
<span class="line"><span>       轻型实用工具虚拟机。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --status</span></span>
<span class="line"><span>       显示适用于 Linux 的 Windows 子系统状态。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --unmount [磁盘]</span></span>
<span class="line"><span>       从所有 WSL2 分发版中卸载和分离磁盘。</span></span>
<span class="line"><span>       如果在没有参数的情况下调用，则卸载和分离所有磁盘。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --uninstall</span></span>
<span class="line"><span>       从此计算机卸载适用于 Linux 的 Windows 子系统包。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --update</span></span>
<span class="line"><span>       更新适用于 Linux 的 Windows 子系统包。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --pre-release</span></span>
<span class="line"><span>               下载预发行版本(如果可用)。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --version, -v</span></span>
<span class="line"><span>       显示版本信息。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用于在适用于 Linux 的 Windows 子系统中管理分发版的参数:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --export &lt;Distro&gt; &lt;FileName&gt; [选项]</span></span>
<span class="line"><span>       将分发版导出到 tar 文件。</span></span>
<span class="line"><span>       文件名可以是 - for stdout。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --vhd</span></span>
<span class="line"><span>               指定应将分发版导出为 .vhdx 文件。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;FileName&gt; [选项]</span></span>
<span class="line"><span>       将指定的 tar 文件作为新分发版导入。</span></span>
<span class="line"><span>       文件名可以是 - for stdin。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --version &lt;Version&gt;</span></span>
<span class="line"><span>               指定要用于新分发的版本。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --vhd</span></span>
<span class="line"><span>               指定所提供的文件是 .vhdx 文件，而不是 tar 文件。</span></span>
<span class="line"><span>               此操作在指定的安装位置创建 .vhdx 文件的副本。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --import-in-place &lt;Distro&gt; &lt;FileName&gt;</span></span>
<span class="line"><span>       将指定的 .vhdx 文件作为新分发版导入。</span></span>
<span class="line"><span>       必须使用 ext4 文件系统类型设置此虚拟硬盘的格式。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --list, -l [选项]</span></span>
<span class="line"><span>       列出分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       选项:</span></span>
<span class="line"><span>           --all</span></span>
<span class="line"><span>               列出所有分发版，包括当前</span></span>
<span class="line"><span>               正在安装或卸载的分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --running</span></span>
<span class="line"><span>               仅列出当前正在运行的分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --quiet, -q</span></span>
<span class="line"><span>               仅显示分发版名称。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --verbose, -v</span></span>
<span class="line"><span>               显示有关所有分发版的详细信息。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           --online, -o</span></span>
<span class="line"><span>               显示适合通过 &#39;wsl.exe --install&#39; 安装的可用分发版列表。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --set-default, -s &lt;Distro&gt;</span></span>
<span class="line"><span>       将分布版设置为默认值。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --set-version &lt;Distro&gt; &lt;Version&gt;</span></span>
<span class="line"><span>       更改指定分发版的版本。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --terminate, -t &lt;Distro&gt;</span></span>
<span class="line"><span>       终止指定的分发版。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   --unregister &lt;Distro&gt;</span></span>
<span class="line"><span>       取消注册分发版并删除根文件系统。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="wsl-配置-启用-systemd" tabindex="-1"><a class="header-anchor" href="#wsl-配置-启用-systemd"><span>WSL 配置，启用 Systemd</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># To enable, start your Ubuntu (or other Systemd) distribution under WSL.</span></span>
<span class="line"><span>sudo -e /etc/wsl.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Add the following:</span></span>
<span class="line"><span>[boot]</span></span>
<span class="line"><span>systemd=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Exit Ubuntu and again:</span></span>
<span class="line"><span>wsl --shutdown</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Then restart Ubuntu.</span></span>
<span class="line"><span>sudo systemctl status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="wsl2-中-systemd-处于降级状态的原因分析及解决方案" tabindex="-1"><a class="header-anchor" href="#wsl2-中-systemd-处于降级状态的原因分析及解决方案"><span>WSL2 中 Systemd 处于降级状态的原因分析及解决方案</span></a></h2><ul><li><a href="https://hydrotho.github.io/Analysis-Of-The-Causes-And-Solutions-Of-Systemd-In-Degraded-State-In-WSL2/" target="_blank" rel="noopener noreferrer">https://hydrotho.github.io/Analysis-Of-The-Causes-And-Solutions-Of-Systemd-In-Degraded-State-In-WSL2/</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 解决方案 创建 /etc/systemd/system/fix-shm.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&gt; sudo systemctl edit --force --full fix-shm.service</span></span>
<span class="line"><span>&gt; systemctl cat fix-shm.service</span></span>
<span class="line"><span># /etc/systemd/system/fix-shm.service</span></span>
<span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Fix /dev/shm Issue</span></span>
<span class="line"><span>Before=sysinit.target</span></span>
<span class="line"><span>DefaultDependencies=no</span></span>
<span class="line"><span>ConditionPathExists=/dev/shm</span></span>
<span class="line"><span>ConditionPathIsSymbolicLink=/dev/shm</span></span>
<span class="line"><span>ConditionPathIsMountPoint=/run/shm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=oneshot</span></span>
<span class="line"><span>ExecStart=/usr/bin/rm /dev/shm</span></span>
<span class="line"><span>ExecStart=/bin/mount --bind -o X-mount.mkdir /run/shm /dev/shm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=sysinit.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 开机自动启用单元</span></span>
<span class="line"><span>&gt; sudo systemctl enable fix-shm.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 立即终止所有正在运行的发行版和 WSL2 轻型实用程序虚拟机</span></span>
<span class="line"><span>&gt; wsl --shutdown</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 重新启动 WSL2 并查看 Systemd 状态</span></span>
<span class="line"><span>&gt; systemctl status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="kms激活windows系统" tabindex="-1"><a class="header-anchor" href="#kms激活windows系统"><span>KMS激活Windows系统</span></a></h2><ul><li><a href="https://www.cnblogs.com/yuyanc/p/18150937" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/yuyanc/p/18150937</a></li></ul><p>在开始菜单上右键，选择 Windows PowerShell(管理员)，依次输入以下命令即可激活成功</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>slmgr /ipk NPPR9-FWDCX-D2C8J-H872K-2YT43 &amp;&amp; slmgr /skms kms.03k.org &amp;&amp; slmgr /ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>slmgr /ipk NPPR9-FWDCX-D2C8J-H872K-2YT43</span></span>
<span class="line"><span>slmgr /skms kms.03k.org</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span>slmgr /upk ::卸载激活码</span></span>
<span class="line"><span>slmgr /xpr ::查看过期时间 激活日算起半年</span></span>
<span class="line"><span>slmgr.vbs -dlv ::命令可以看到激活后的使用期限为180天</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windows各版本的产品密钥" tabindex="-1"><a class="header-anchor" href="#windows各版本的产品密钥"><span>Windows各版本的产品密钥</span></a></h2><ul><li>Win10企业版: NPPR9-FWDCX-D2C8J-H872K-2YT43</li><li>Win10专业版: W269N-WFGWX-YVC9B-4J6C9-T83GX</li><li>Windows Server 2019 Datacenter: WMDGN-G9PQG-XVVXX-R3X43-63DFG</li><li>Windows Server 2019 Standard: N69G4-B89J2-4G8F4-WWYCC-J464C</li><li>Windows Server 2019 Essential: WVDHN-86M7X-466 P 6-VHXV7-YY726</li></ul><h2 id="kms服务器" tabindex="-1"><a class="header-anchor" href="#kms服务器"><span>KMS服务器</span></a></h2><p>需要ping测试是否有效</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>zh.us.to</span></span>
<span class="line"><span>kms.03k.org</span></span>
<span class="line"><span>kms.chinancce.com</span></span>
<span class="line"><span>kms.shuax.com</span></span>
<span class="line"><span>kms.dwhd.org</span></span>
<span class="line"><span>kms.luody.info</span></span>
<span class="line"><span>kms.digiboy.ir</span></span>
<span class="line"><span>kms.lotro.cc</span></span>
<span class="line"><span>ss.yechiu.xin</span></span>
<span class="line"><span>www.zgbs.cc</span></span>
<span class="line"><span>cy2617.jios.org</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windows-server-2022-kms激活序列号" tabindex="-1"><a class="header-anchor" href="#windows-server-2022-kms激活序列号"><span>Windows Server 2022 KMS激活序列号</span></a></h2><ul><li><a href="https://www.orcy.net.cn/1882.html" target="_blank" rel="noopener noreferrer">https://www.orcy.net.cn/1882.html</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 激活教程</span></span>
<span class="line"><span># 以管理员身份运行powershell或cmd，输入以下命令激活 （序列号替换如上对应的版本批量授权密钥）</span></span>
<span class="line"><span># 以数据中心版为例，KMS激活server2022命令：</span></span>
<span class="line"><span>slmgr -ipk WX4NM-KYWYW-QJJR4-XV3QB-6VM33</span></span>
<span class="line"><span>slmgr -skms kms.0t.net.cn</span></span>
<span class="line"><span>slmgr -ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span># KMS服务器: kms.0t.net.cn</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Windows Server2022序列号</span></span>
<span class="line"><span># Server2022 零售版：</span></span>
<span class="line"><span>RGN6B-MCPWX-6K6GK-HKM33-7VCXY - Standard 标准版（非图形界面和桌面体验）</span></span>
<span class="line"><span>DNVBD-FCT8Y-TQT8Q-HGQ34-QGRRV - Datacenter 数据中心版（非图形界面和桌面体验）</span></span>
<span class="line"><span># Server2022 批量授权版：</span></span>
<span class="line"><span>VDYBN-27WPP-V4HQT-9VMD4-VMK7H - Standard 标准版（非图形界面和桌面体验）</span></span>
<span class="line"><span>WX4NM-KYWYW-QJJR4-XV3QB-6VM33 - Datacenter 数据中心版（非图形界面和桌面体验）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windowsserver评估版转为正式版并激活" tabindex="-1"><a class="header-anchor" href="#windowsserver评估版转为正式版并激活"><span>WindowsServer评估版转为正式版并激活</span></a></h2><p>一般从官网下载的Windows Server版本都是评估试用版本。这时候想转为正式版本，就需要使用转换激活代码。请参照不同的版本使用不同的代码。注意：以下代码请以管理员身份运行。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># Windows Server 2016标准版#</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 先执行下列命令将评估版转为正式版本：</span></span>
<span class="line"><span>DISM /online /Set-Edition:ServerStandard /ProductKey:WC2BQ-8NRM3-FDDYY-2BFGV-KHKQY /AcceptEula</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 转换完成后，系统可能提示需要重启，重启完成后，使用下列代码进行激活系统：</span></span>
<span class="line"><span>slmgr.vbs /upk</span></span>
<span class="line"><span>slmgr /skms kms.chinancce.com</span></span>
<span class="line"><span>slmgr /ipk P96NB-8TJQB-BW47F-TQRMX-T839R</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># Windows Server 2016数据中心版#</span></span>
<span class="line"><span># 先执行下列命令将评估版转为正式版本：</span></span>
<span class="line"><span>DISM /online /Set-Edition:ServerDatacenter /ProductKey:CB7KF-BWN84-R7R2Y-793K2-8XDDG /AcceptEula</span></span>
<span class="line"><span># 转换完成后，系统可能提示需要重启，重启完成后，使用下列代码进行激活系统：</span></span>
<span class="line"><span>slmgr.vbs /upk</span></span>
<span class="line"><span>slmgr /skms kms.chinancce.com</span></span>
<span class="line"><span>slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Windows Server 2019标准版#</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 先执行下列命令将评估版转为正式版本：</span></span>
<span class="line"><span>DISM /online /Set-Edition:ServerStandard /ProductKey:N69G4-B89J2-4G8F4-WWYCC-J464C /AcceptEula</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 转换完成后，系统可能提示需要重启，重启完成后，使用下列代码进行激活系统：</span></span>
<span class="line"><span>slmgr.vbs /upk</span></span>
<span class="line"><span>slmgr /skms kms.chinancce.com</span></span>
<span class="line"><span>slmgr /ipk N69G4-B89J2-4G8F4-WWYCC-J464C</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># Windows Server 2019数据中心版#</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 先执行下列命令将评估版转为正式版本：</span></span>
<span class="line"><span>DISM /online /Set-Edition:ServerDatacenter /ProductKey:WMDGN-G9PQG-XVVXX-R3X43-63DFG /AcceptEula</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 转换完成后，系统可能提示需要重启，重启完成后，使用下列代码进行激活系统：</span></span>
<span class="line"><span>slmgr.vbs /upk</span></span>
<span class="line"><span>slmgr /skms kms.chinancce.com</span></span>
<span class="line"><span>slmgr /ipk WMDGN-G9PQG-XVVXX-R3X43-63DFG</span></span>
<span class="line"><span>slmgr /ato</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windows-server-2022-系统评估版转为正式版方法" tabindex="-1"><a class="header-anchor" href="#windows-server-2022-系统评估版转为正式版方法"><span>Windows Server 2022 系统评估版转为正式版方法</span></a></h2><ul><li><a href="https://gclz.cn/post/737/" target="_blank" rel="noopener noreferrer">https://gclz.cn/post/737/</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>1、管理员模式运行cmd,输入命令:DISM /online /Get-CurrentEdition，得到结果：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>C:\\Users\\Administrator&gt;DISM /online /Get-CurrentEdition</span></span>
<span class="line"><span></span></span>
<span class="line"><span>部署映像服务和管理工具</span></span>
<span class="line"><span>版本: 10.0.20348.1</span></span>
<span class="line"><span>映像版本: 10.0.20348.202</span></span>
<span class="line"><span>当前版本为:</span></span>
<span class="line"><span>当前版本 : ServerDatacenterEval</span></span>
<span class="line"><span>操作成功完成。</span></span>
<span class="line"><span>其中ServerDatacenterEval去掉Eval后，就是当前的Edition ID</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2、输入命令升级Windows Server 2022 数据中心版的例子，如果是其他版本，需要替换掉对应的key和Edition，运行结果如下：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>C:\\Users\\Administrator&gt;DISM /online /Set-Edition:ServerDatacenter /ProductKey:WX4NM-KYWYW-QJJR4-XV3QB-6VM33 /AcceptEula</span></span>
<span class="line"><span></span></span>
<span class="line"><span>部署映像服务和管理工具</span></span>
<span class="line"><span>版本: 10.0.20348.1</span></span>
<span class="line"><span>映像版本: 10.0.20348.202</span></span>
<span class="line"><span>开始升级组件...</span></span>
<span class="line"><span>开始安装产品密钥...</span></span>
<span class="line"><span>产品密钥安装已完成。</span></span>
<span class="line"><span>正在添加程序包 Microsoft-Windows-ServerDatacenterEdition~31bf3856ad364e35~amd64~~10.0.20348.169</span></span>
<span class="line"><span>[==========================100.0%==========================]</span></span>
<span class="line"><span>组件升级已完成。</span></span>
<span class="line"><span>重新启动 Windows 就变成正式版了。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windowsserver-2019-active" tabindex="-1"><a class="header-anchor" href="#windowsserver-2019-active"><span>WindowsServer 2019 Active</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>## 方式1、</span></span>
<span class="line"><span>slmgr /upk</span></span>
<span class="line"><span>slmgr /ipk N69G4-B89J2-4G8F4-WWYCC-J464C</span></span>
<span class="line"><span>slmgr /skms kms.v0v.bid</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 方式2</span></span>
<span class="line"><span>slmgr /ipk WMDGN-G9PQG-XVVXX-R3X43-63DFG</span></span>
<span class="line"><span>slmgr /skms kms.v0v.bid</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span>slmgr /xpr</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 方式3</span></span>
<span class="line"><span>slmgr /ipk WMDGN-G9PQG-XVVXX-R3X43-63DFG</span></span>
<span class="line"><span>slmgr /skms zh.us.to</span></span>
<span class="line"><span>slmgr /ato</span></span>
<span class="line"><span>slmgr /xpr</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,96)])])}const t=n(l,[["render",p]]),o=JSON.parse('{"path":"/tld/basetools/windows-feature.html","title":"Windows 官方优质资源","lang":"zh-CN","frontmatter":{"date":"2020-01-03T00:00:00.000Z","title":"Windows 官方优质资源","author":["SecCMD"],"description":"Windows 官方优质资源\\n","categories":"基础工具","tags":["操作系统","Windows"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows 官方优质资源\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-01-03T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-09T12:08:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"SecCMD\\"}]}"],["meta",{"property":"og:url","content":"https://www.seccmd.net/tld/basetools/windows-feature.html"}],["meta",{"property":"og:site_name","content":"明剑实验室"}],["meta",{"property":"og:title","content":"Windows 官方优质资源"}],["meta",{"property":"og:description","content":"Windows 官方优质资源\\n"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-09T12:08:14.000Z"}],["meta",{"property":"article:author","content":"SecCMD"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:tag","content":"操作系统"}],["meta",{"property":"article:published_time","content":"2020-01-03T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-09T12:08:14.000Z"}]]},"git":{"createdTime":1734092852000,"updatedTime":1757419694000,"contributors":[{"name":"seccmd","username":"seccmd","email":"79789833+seccmd@users.noreply.github.com","commits":2,"url":"https://github.com/seccmd"},{"name":"fireadm","username":"fireadm","email":"iwanwu@hotmail.com","commits":2,"url":"https://github.com/fireadm"}]},"readingTime":{"minutes":12.38,"words":3714},"filePathRelative":"tld/basetools/windows-feature.md"}');export{t as comp,o as data};
